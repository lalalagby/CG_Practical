\chapter{Architecture}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture}\index{Architecture@{Architecture}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1287}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1287}%
 The Input \doxylink{namespace_system}{System} has a layered architecture that consists of a low-\/level layer and a high-\/level layer.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1288}{}\doxysection{\texorpdfstring{Native backend}{Native backend}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1288}
The foundation of the Input \doxylink{namespace_system}{System} is the native backend code. This is platform-\/specific code which collects information about available Devices and input data from Devices. This code is not part of the Input \doxylink{namespace_system}{System} package, but is included with \doxylink{namespace_unity}{Unity} itself. It has implementations for each runtime platform supported by \doxylink{namespace_unity}{Unity}. This is why some platform-\/specific input bugs can only be fixed by an update to \doxylink{namespace_unity}{Unity}, rather than a new version of the Input \doxylink{namespace_system}{System} package.

The Input \doxylink{namespace_system}{System} interfaces with the native backend using \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_events}{events}{0} that the native backend sends. These events notify the system of the creation and removal of \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_devices}{Input Devices}{0}, as well as any updates to the Device states. For efficiency and to avoid creating any garbage, the native backend reports these events as a simple buffer of raw, unmanaged memory containing a stream of events.

The Input \doxylink{namespace_system}{System} can also send data back to the native backend in the form of \href{Devices.md\#device-commands}{\texttt{ commands}} sent to Devices, which are also buffers of memory that the native backend interprets. These commands can have different meanings for different Device types and platforms.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1289}{}\doxysection{\texorpdfstring{Input System (low-\/level)}{Input System (low-\/level)}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1289}


The low-\/level Input \doxylink{namespace_system}{System} code processes and interprets the memory from the event stream that the native backend provides, and dispatches individual events.

The Input \doxylink{namespace_system}{System} creates Device representations for any newly discovered Device in the event stream. The low-\/level code sees a Device as a block of raw, unmanaged memory. If it receives a state event for a Device, it writes the data from the state event into the Device\textquotesingle{}s \href{Controls.md\#control-state}{\texttt{ state representation}} in memory, so that the state always contains an up-\/to-\/date representation of the Device and all its Controls.

The low-\/level system code also contains structs which describe the data layout of commonly known Devices.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1290}{}\doxysection{\texorpdfstring{Input System (high-\/level)}{Input System (high-\/level)}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_architecture_autotoc_md1290}


The high-\/level Input \doxylink{namespace_system}{System} code interprets the data in a Device\textquotesingle{}s state buffers by using \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_layouts}{layouts}{0}, which describe the data layout of a Device and its Controls in memory. The Input \doxylink{namespace_system}{System} creates layouts from either the pre-\/defined structs of commonly known Devices supplied by the low level system, or dynamically at runtime, as in the case of \href{HID.md\#auto-generated-layouts}{\texttt{ generic HIDs}}.

Based on the information in the layouts, the Input \doxylink{namespace_system}{System} then creates \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_controls}{Control}{0} representations for each of the Device\textquotesingle{}s controls, which let you read the state of each individual Control in a Device.

As part of the high-\/level system, you can also build another abstraction layer to map Input Controls to your application mechanics. Use \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_actions}{Actions}{0} to \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_action_bindings}{bind}{0} one or more Controls to an input in your application. The Input \doxylink{namespace_system}{System} then monitors these Controls for state changes, and notifies your game logic using \href{Actions.md\#responding-to-actions}{\texttt{ callbacks}}. You can also specify more complex behaviors for your Actions using \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_processors}{Processors}{0} (which perform processing on the input data before sending it to you) and \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_interactions}{Interactions}{0} (which let you specify patterns of input on a Control to listen to, such as multi-\/taps). 