\chapter{White Balance Node}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node}\index{White Balance Node@{White Balance Node}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4139}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4139}%
 \hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4140}{}\doxysection{\texorpdfstring{Description}{Description}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4140}
Adjusts the temperature and tint of input {\bfseries{In}} by the amount of inputs {\bfseries{Temperature}} and {\bfseries{Tint}} respectively. {\bfseries{Temperature}} has the effect of shifting the values towards yellow or blue. {\bfseries{Tint}} has the effect of shifting towards pink or green.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4141}{}\doxysection{\texorpdfstring{Ports}{Ports}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4141}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Direction   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Binding   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Direction   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Binding   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endhead
In   &Input   &Vector 3   &None   &Input value    \\\cline{1-5}
Temperature   &Input   &Float   &None   &Temperature offset value    \\\cline{1-5}
Tint   &Input   &Float   &None   &Tint offset value    \\\cline{1-5}
Out   &Output   &Vector 3   &None   &Output value   \\\cline{1-5}
\end{longtabu}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4142}{}\doxysection{\texorpdfstring{Generated Code Example}{Generated Code Example}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_white-_balance-_node_autotoc_md4142}
The following example code represents one possible outcome of this node.


\begin{DoxyCode}{0}
\DoxyCodeLine{void\ Unity\_WhiteBalance\_float(float3\ In,\ float\ Temperature,\ float\ Tint,\ out\ float3\ Out)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ //\ Range\ \string~[-\/1.67;1.67]\ works\ best}
\DoxyCodeLine{\ \ \ \ float\ t1\ =\ Temperature\ *\ 10\ /\ 6;}
\DoxyCodeLine{\ \ \ \ float\ t2\ =\ Tint\ *\ 10\ /\ 6;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ Get\ the\ CIE\ xy\ chromaticity\ of\ the\ reference\ white\ point.}
\DoxyCodeLine{\ \ \ \ //\ Note:\ 0.31271\ =\ x\ value\ on\ the\ D65\ white\ point}
\DoxyCodeLine{\ \ \ \ float\ x\ =\ 0.31271\ -\/\ t1\ *\ (t1\ <\ 0\ ?\ 0.1\ :\ 0.05);}
\DoxyCodeLine{\ \ \ \ float\ standardIlluminantY\ =\ 2.87\ *\ x\ -\/\ 3\ *\ x\ *\ x\ -\/\ 0.27509507;}
\DoxyCodeLine{\ \ \ \ float\ y\ =\ standardIlluminantY\ +\ t2\ *\ 0.05;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ Calculate\ the\ coefficients\ in\ the\ LMS\ space.}
\DoxyCodeLine{\ \ \ \ float3\ w1\ =\ float3(0.949237,\ 1.03542,\ 1.08728);\ //\ D65\ white\ point}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ //\ CIExyToLMS}
\DoxyCodeLine{\ \ \ \ float\ Y\ =\ 1;}
\DoxyCodeLine{\ \ \ \ float\ X\ =\ Y\ *\ x\ /\ y;}
\DoxyCodeLine{\ \ \ \ float\ Z\ =\ Y\ *\ (1\ -\/\ x\ -\/\ y)\ /\ y;}
\DoxyCodeLine{\ \ \ \ float\ L\ =\ 0.7328\ *\ X\ +\ 0.4296\ *\ Y\ -\/\ 0.1624\ *\ Z;}
\DoxyCodeLine{\ \ \ \ float\ M\ =\ -\/0.7036\ *\ X\ +\ 1.6975\ *\ Y\ +\ 0.0061\ *\ Z;}
\DoxyCodeLine{\ \ \ \ float\ S\ =\ 0.0030\ *\ X\ +\ 0.0136\ *\ Y\ +\ 0.9834\ *\ Z;}
\DoxyCodeLine{\ \ \ \ float3\ w2\ =\ float3(L,\ M,\ S);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ float3\ balance\ =\ float3(w1.x\ /\ w2.x,\ w1.y\ /\ w2.y,\ w1.z\ /\ w2.z);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ float3x3\ LIN\_2\_LMS\_MAT\ =\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 3.90405e-\/1,\ 5.49941e-\/1,\ 8.92632e-\/3,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 7.08416e-\/2,\ 9.63172e-\/1,\ 1.35775e-\/3,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 2.31082e-\/2,\ 1.28021e-\/1,\ 9.36245e-\/1}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ float3x3\ LMS\_2\_LIN\_MAT\ =\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ 2.85847e+0,\ -\/1.62879e+0,\ -\/2.48910e-\/2,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ -\/2.10182e-\/1,\ \ 1.15820e+0,\ \ 3.24281e-\/4,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ -\/4.18120e-\/2,\ -\/1.18169e-\/1,\ \ 1.06867e+0}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ float3\ lms\ =\ mul(LIN\_2\_LMS\_MAT,\ In);}
\DoxyCodeLine{\ \ \ \ lms\ *=\ balance;}
\DoxyCodeLine{\ \ \ \ Out\ =\ mul(LMS\_2\_LIN\_MAT,\ lms);}
\DoxyCodeLine{\}}

\end{DoxyCode}
 