\chapter{HID Support}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d}\index{HID Support@{HID Support}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1385}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1385}%
 Human Interface Device (HID) is a \href{https://www.usb.org/hid}{\texttt{ specification}} to describe peripheral user input devices connected to computers via USB or Bluetooth. HID is commonly used to implement devices such as gamepads, joysticks, or racing wheels.

The Input \doxylink{namespace_system}{System} directly supports HID (connected via both USB and Bluetooth) on Windows, Mac\+OS, and the Universal Windows Platform (UWP). The system might support HID on other platforms, but not deliver input through HID-\/specific APIs. For example, on Linux, the system supports gamepad and joystick HIDs through SDL, but doesn\textquotesingle{}t support other HIDs.

Every HID comes with a device descriptor. To browse through the descriptor of an HID from the Input Debugger, click the {\bfseries{HID Descriptor}} button in the device debugger window. To specify the type of the device, the HID descriptor reports entry numbers in the \href{https://www.usb.org/document-library/hid-usage-tables-112}{\texttt{ HID usage tables}}, and a list of all controls on the device, along with their data ranges and usages.



The Input \doxylink{namespace_system}{System} handles HIDs in one of two ways\+:


\begin{DoxyEnumerate}
\item The system has a known layout for the specific HID.
\item If the system does not have a known layout, it auto-\/generates one for the HID.
\end{DoxyEnumerate}\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1386}{}\doxysection{\texorpdfstring{Auto-\/generated layouts}{Auto-\/generated layouts}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1386}
By default, the Input \doxylink{namespace_system}{System} creates layouts and Device representations for any HID which reports its usage as {\ttfamily Generic\+Desktop/\+Joystick}, {\ttfamily Generic\+Desktop/\+Gamepad}, or {\ttfamily Generic\+Desktop/\+Multi\+Axis\+Controller} (see the \href{https://www.usb.org/document-library/hid-usage-tables-112}{\texttt{ HID usage table specifications}} for more information). To change the list of supported usages, set \href{../api/UnityEngine.InputSystem.HID.HIDSupport.html\#UnityEngine_InputSystem_HID_HIDSupport_supportedHIDUsages}{\texttt{ {\ttfamily HIDSupport.\+supported\+HIDUsages}}}.

When the Input \doxylink{namespace_system}{System} automatically creates a layout for an HID, it always reports these Devices as \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_joystick}{{\ttfamily Joysticks}}{0}, represented by the \href{../api/UnityEngine.InputSystem.Joystick.html}{\texttt{ {\ttfamily Joystick} device class}}. The first elements with a reported HID usage of {\ttfamily Generic\+Desktop/X} and {\ttfamily Generic\+Desktop/Y} together form the joystick\textquotesingle{}s \href{../api/UnityEngine.InputSystem.Joystick.html\#UnityEngine_InputSystem_Joystick_stick}{\texttt{ {\ttfamily stick}}} Control. The system then adds Controls for all further HID axis or button elements, using the Control names reported by the HID specification. The Input \doxylink{namespace_system}{System} assigns the first control with an HID usage of {\ttfamily Button/\+Button 1} to the joystick\textquotesingle{}s \href{../api/UnityEngine.InputSystem.Joystick.html\#UnityEngine_InputSystem_Joystick_trigger}{\texttt{ {\ttfamily trigger}}} Control.

The auto-\/generated layouts represent a "{}best effort"{} on the part of the Input \doxylink{namespace_system}{System}. The way Human Interface Devices describe themselves in accordance with the HID standard is too ambiguous in practice, so generated layouts might lead to Controls that don\textquotesingle{}t work as expected. For example, while the layout builder can identify hat switches and D-\/pads, it can often only make guesses as to which direction represents which. The same goes for individual buttons, which generally aren\textquotesingle{}t assigned any meaning in HID.

The best way to resolve the situation of HIDs not working as expected is to add a custom layout, which bypasses auto-\/generation altogether. See Creating a custom device layout for details.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1387}{}\doxysection{\texorpdfstring{HID output}{HID output}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1387}
HIDs can support output (for example, to toggle lights or force feedback motors on a gamepad). \doxylink{namespace_unity}{Unity} controls output by sending HID Output Report commands to a Device. Output reports use Device-\/specific data formats. To use HID Output Reports, call \href{../api/UnityEngine.InputSystem.InputDevice.html\#UnityEngine_InputSystem_InputDevice_ExecuteCommand__1___0__}{\texttt{ {\ttfamily Input\+Device.\+Execute\+Command}}} to send a command struct with the \href{../api/UnityEngine.InputSystem.LowLevel.IInputDeviceCommandInfo.html\#properties}{\texttt{ {\ttfamily type\+Static}}} property set as {\ttfamily "{}\+HIDO"{}} to a Device. The command struct contains the Device-\/specific data sent out to the HID.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1388}{}\doxysection{\texorpdfstring{Creating a custom device layout}{Creating a custom device layout}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1388}
Often, when using the layouts auto-\/generated for HIDs, the result isn\textquotesingle{}t ideal. Controls don\textquotesingle{}t receive proper names specific to the Device, some Controls might not work as expected, and some Controls that use vendor-\/specific formats might not appear altogether.

The best way to deal with this is to override the HID fallback and set up a custom Device layout specifically for your Device. This overrides the default auto-\/generation and gives you full control over how the Device is exposed.

Below are three example workflows showing different ways to achieve this.


\begin{DoxyItemize}
\item Example 1 -\/ Use an existing C\# Input\+Device
\item Example 2 -\/ Create your own Input\+Device class
\item Example 3 -\/ A more complex example using the PS4 Dual\+Shock Controller
\end{DoxyItemize}\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1389}{}\doxysubsection{\texorpdfstring{Custom Device Workflow Example 1 -\/ Use an existing C\# Input\+Device}{Custom Device Workflow Example 1 -\/ Use an existing C\# Input\+Device}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1389}
If you want to use one of the existing C\# \href{../api/UnityEngine.InputSystem.InputDevice.html}{\texttt{ {\ttfamily Input\+Device}}} classes in code to interface with your Device, you can build on an existing layout using JSON\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ "{}name"{}\ :\ "{}MyDevice"{},}
\DoxyCodeLine{\ \ \ \ "{}extend"{}\ :\ "{}Gamepad"{},\ //\ Or\ some\ other\ thing}
\DoxyCodeLine{\ \ \ \ "{}controls"{}\ :\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}name"{}\ :\ "{}firstButton"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}layout"{}\ :\ "{}Button"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}offset"{}\ :\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}bit"{}:\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}format"{}\ :\ "{}BIT"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}name"{}\ :\ "{}secondButton"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}layout"{}\ :\ "{}Button"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}offset"{}\ :\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}bit"{}:\ 1,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}format"{}\ :\ "{}BIT"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}name"{}\ :\ "{}axis"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}layout"{}\ :\ "{}Axis"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}offset"{}\ :\ 4,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}format"{}\ :\ "{}FLT"{},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ "{}parameters"{}\ :\ "{}clamp=true,clampMin=0,clampMax=1"{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ ]}
\DoxyCodeLine{\}}

\end{DoxyCode}
 You then register your layout with the system and then instantiate it\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#}}
\DoxyCodeLine{\ \ \ InputSystem.RegisterControlLayout(myDeviceJson);}
\DoxyCodeLine{\ \ \ var\ device\ =\ InputSystem.AddDevice(\textcolor{stringliteral}{"{}MyDevice"{}});}

\end{DoxyCode}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1390}{}\doxysubsection{\texorpdfstring{Custom Device Workflow Example 2 -\/ Create your own Input\+Device class}{Custom Device Workflow Example 2 -\/ Create your own Input\+Device class}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1390}
Alternatively, you can create your own \href{../api/UnityEngine.InputSystem.InputDevice.html}{\texttt{ {\ttfamily Input\+Device}}} class and state layouts in C\#.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#}}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{struct\ }MyDeviceState\ :\ IInputStateTypeInfo}
\DoxyCodeLine{\ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{comment}{//\ FourCC\ type\ codes\ are\ used\ to\ identify\ the\ memory\ layouts\ of\ state\ blocks.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ FourCC\ format\ =>\ \textcolor{keyword}{new}\ FourCC(\textcolor{charliteral}{'M'},\ \textcolor{charliteral}{'D'},\ \textcolor{charliteral}{'E'},\ \textcolor{charliteral}{'V'});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}firstButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ bit\ =\ 0)]}
\DoxyCodeLine{\ \ \ \ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}secondButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ bit\ =\ 1)]}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ buttons;}
\DoxyCodeLine{\ \ \ \ \ \ \ [InputControl(layout\ =\ \textcolor{stringliteral}{"{}Analog"{}},\ parameters=\textcolor{stringliteral}{"{}clamp=true,clampMin=0,clampMax=1"{}})]}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{float}\ axis;}
\DoxyCodeLine{\ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ [InputState(typeof(MyDeviceState)]}
\DoxyCodeLine{\ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class}\ MyDevice\ :\ InputDevice}
\DoxyCodeLine{\ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ ButtonControl\ firstButton\ \{\ get;\ \textcolor{keyword}{private}\ set;\ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ ButtonControl\ secondButton\ \{\ get;\ \textcolor{keyword}{private}\ set;\ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{public}\ AxisControl\ axis\ \{\ get;\ \textcolor{keyword}{private}\ set;\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{override}\ \textcolor{keywordtype}{void}\ FinishSetup(InputControlSetup\ setup)}
\DoxyCodeLine{\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ firstButton\ =\ setup.GetControl<ButtonControl>(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}firstButton"{}});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ secondButton\ =\ setup.GetControl<ButtonControl>(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}secondButton"{}});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ axis\ =\ setup.GetControl<AxisControl>(\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}axis"{}});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ base.FinishSetup(setup);}
\DoxyCodeLine{\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \}}

\end{DoxyCode}


To create an instance of your Device, register it as a layout and then instantiate it\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#}}
\DoxyCodeLine{\ \ \ InputSystem.RegisterControlLayout(\textcolor{stringliteral}{"{}MyDevice"{}},\ typeof(MyDevice));}
\DoxyCodeLine{\ \ \ InputSystem.AddDevice(\textcolor{stringliteral}{"{}MyDevice"{}});}

\end{DoxyCode}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1391}{}\doxysubsection{\texorpdfstring{Custom Device Workflow Example 3 -\/ PS4 Dual\+Shock Controller}{Custom Device Workflow Example 3 -\/ PS4 Dual\+Shock Controller}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1391}
This example workflow uses the same technique as the previous example, but provides more detail by using the PS4 Dual\+Shock controller as a more complex device to set up.

The following example assumes that the Input \doxylink{namespace_system}{System} doesn\textquotesingle{}t already have a custom layout for the PS4 Dual\+Shock controller, and that you want to add such a layout.

In this example, you want to expose the controller as a \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_gamepad}{{\ttfamily Gamepad}}{0} and you roughly know the HID data format used by the Device.

\texorpdfstring{$>$}{>}{\bfseries{Tip}}\+: If you don\textquotesingle{}t know the format of a given HID you want to support, you can open the Input Debugger with the Device plugged in and pop up both the debugger view for the Device and the window showing the HID descriptor. Then, you can go through the Controls one by one, see what happens in the debug view, and correlate that to the Controls in the HID descriptor. You can also double-\/click individual events and compare the raw data coming in from the Device. If you select two events in the event trace, you can then right-\/click them and choose {\bfseries{Compare}} to open a window that shows only the differences between the two events.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1392}{}\doxysubsubsection{\texorpdfstring{Step 1\+: The state struct}{Step 1\+: The state struct}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1392}
The first step is to describe in detail what format that input data for the Device comes in, as well as the \href{../api/UnityEngine.InputSystem.InputControl.html}{\texttt{ {\ttfamily Input\+Control}}} instances that should read out individual pieces of information from that data.

The HID input reports from the PS4 controller look approximately like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{keyword}{struct\ }PS4InputReport}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ reportId;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#0}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftStickX;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#1}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftStickY;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#2}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightStickX;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#3}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightStickY;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#4}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ dpad\ :\ 4;\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#5\ bit\ \#0\ (0=up,\ 2=right,\ 4=down,\ 6=left)}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ squareButton\ :\ 1;\ \ \ \ \ \textcolor{comment}{//\ \#5\ bit\ \#4}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ crossButton\ :\ 1;\ \ \ \ \ \ \textcolor{comment}{//\ \#5\ bit\ \#5}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ circleButton\ :\ 1;\ \ \ \ \ \textcolor{comment}{//\ \#5\ bit\ \#6}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ triangleButton\ :\ 1;\ \ \ \textcolor{comment}{//\ \#5\ bit\ \#7}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftShoulder\ :\ 1;\ \ \ \ \ \textcolor{comment}{//\ \#6\ bit\ \#0}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightShoulder\ :\ 1;\ \ \ \ \textcolor{comment}{//\ \#6\ bit\ \#1}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftTriggerButton\ :\ 2;\textcolor{comment}{//\ \#6\ bit\ \#2}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightTriggerButton\ :\ 2;\textcolor{comment}{//\ \#6\ bit\ \#3}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ shareButton\ :\ 1;\ \ \ \ \ \ \textcolor{comment}{//\ \#6\ bit\ \#4}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ optionsButton\ :\ 1;\ \ \ \ \textcolor{comment}{//\ \#6\ bit\ \#5}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftStickPress\ :\ 1;\ \ \ \textcolor{comment}{//\ \#6\ bit\ \#6}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightStickPress\ :\ 1;\ \ \textcolor{comment}{//\ \#6\ bit\ \#7}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ psButton\ :\ 1;\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#7\ bit\ \#0}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ touchpadPress\ :\ 1;\ \ \ \ \textcolor{comment}{//\ \#7\ bit\ \#1}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ padding\ :\ 6;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ leftTrigger;\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#8}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{byte}\ rightTrigger;\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \#9}}
\DoxyCodeLine{\}}

\end{DoxyCode}


You can translate this into a C\# struct\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ We\ receive\ data\ as\ raw\ HID\ input\ reports.\ This\ struct}}
\DoxyCodeLine{\textcolor{comment}{//\ describes\ the\ raw\ binary\ format\ of\ such\ a\ report.}}
\DoxyCodeLine{[StructLayout(LayoutKind.Explicit,\ Size\ =\ 32)]}
\DoxyCodeLine{\textcolor{keyword}{struct\ }DualShock4HIDInputReport\ :\ IInputStateTypeInfo}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Because\ all\ HID\ input\ reports\ are\ tagged\ with\ the\ 'HID\ '\ FourCC,}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ this\ is\ the\ format\ we\ need\ to\ use\ for\ this\ state\ struct.}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ FourCC\ format\ =>\ \textcolor{keyword}{new}\ FourCC(\textcolor{charliteral}{'H'},\ \textcolor{charliteral}{'I'},\ \textcolor{charliteral}{'D'});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ HID\ input\ reports\ can\ start\ with\ an\ 8-\/bit\ report\ ID.\ It\ depends\ on\ the\ device}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ whether\ this\ is\ present\ or\ not.\ On\ the\ PS4\ DualShock\ controller,\ it\ is}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ present.\ We\ don't\ really\ need\ to\ add\ the\ field,\ but\ let's\ do\ so\ for\ the\ sake\ of}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ completeness.\ This\ can\ also\ help\ with\ debugging.}}
\DoxyCodeLine{\ \ \ \ [FieldOffset(0)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ reportId;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ The\ InputControl\ annotations\ here\ probably\ look\ a\ little\ scary,\ but\ what\ we\ do}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ here\ is\ relatively\ straightforward.\ The\ fields\ we\ add\ we\ annotate\ with}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ [FieldOffset]\ to\ force\ them\ to\ the\ right\ location,\ and\ then\ we\ add\ InputControl}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ to\ attach\ controls\ to\ the\ fields.\ Each\ InputControl\ attribute\ can\ only\ do\ one\ of}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ two\ things:\ either\ it\ adds\ a\ new\ control\ or\ it\ modifies\ an\ existing\ control.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Given\ that\ our\ layout\ is\ based\ on\ Gamepad,\ almost\ all\ the\ controls\ here\ are}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ inherited\ from\ Gamepad,\ and\ we\ just\ modify\ settings\ on\ them.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Stick"{}},\ format\ =\ \textcolor{stringliteral}{"{}VC2B"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/x"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/left"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0,clampMax=0.5,invert"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/right"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0.5,clampMax=1"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/y"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}invert,normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/up"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0,clampMax=0.5,invert"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStick/down"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0.5,clampMax=1,invert=false"{}})]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(1)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ leftStickX;}
\DoxyCodeLine{\ \ \ \ [FieldOffset(2)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ leftStickY;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Stick"{}},\ format\ =\ \textcolor{stringliteral}{"{}VC2B"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/x"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/left"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0,clampMax=0.5,invert"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/right"{}},\ offset\ =\ 0,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0.5,clampMax=1"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/y"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}invert,normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/up"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0,clampMax=0.5,invert"{}})]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStick/down"{}},\ offset\ =\ 1,\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}normalize,normalizeMin=0,normalizeMax=1,normalizeZero=0.5,clamp,clampMin=0.5,clampMax=1,invert=false"{}})]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(3)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ rightStickX;}
\DoxyCodeLine{\ \ \ \ [FieldOffset(4)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ rightStickY;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}dpad"{}},\ format\ =\ \textcolor{stringliteral}{"{}BIT"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Dpad"{}},\ sizeInBits\ =\ 4,\ defaultState\ =\ 8)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}dpad/up"{}},\ format\ =\ \textcolor{stringliteral}{"{}BIT"{}},\ layout\ =\ \textcolor{stringliteral}{"{}DiscreteButton"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}minValue=7,maxValue=1,nullValue=8,wrapAtValue=7"{}},\ bit\ =\ 0,\ sizeInBits\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}dpad/right"{}},\ format\ =\ \textcolor{stringliteral}{"{}BIT"{}},\ layout\ =\ \textcolor{stringliteral}{"{}DiscreteButton"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}minValue=1,maxValue=3"{}},\ bit\ =\ 0,\ sizeInBits\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}dpad/down"{}},\ format\ =\ \textcolor{stringliteral}{"{}BIT"{}},\ layout\ =\ \textcolor{stringliteral}{"{}DiscreteButton"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}minValue=3,maxValue=5"{}},\ bit\ =\ 0,\ sizeInBits\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}dpad/left"{}},\ format\ =\ \textcolor{stringliteral}{"{}BIT"{}},\ layout\ =\ \textcolor{stringliteral}{"{}DiscreteButton"{}},\ parameters\ =\ \textcolor{stringliteral}{"{}minValue=5,\ maxValue=7"{}},\ bit\ =\ 0,\ sizeInBits\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}buttonWest"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Square"{}},\ bit\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}buttonSouth"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Cross"{}},\ bit\ =\ 5)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}buttonEast"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Circle"{}},\ bit\ =\ 6)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}buttonNorth"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Triangle"{}},\ bit\ =\ 7)]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(5)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ buttons1;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftShoulder"{}},\ bit\ =\ 0)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightShoulder"{}},\ bit\ =\ 1)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftTriggerButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ bit\ =\ 2)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightTriggerButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ bit\ =\ 3)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}select"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Share"{}},\ bit\ =\ 4)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}start"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Options"{}},\ bit\ =\ 5)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftStickPress"{}},\ bit\ =\ 6)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightStickPress"{}},\ bit\ =\ 7)]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(6)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ buttons2;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}systemButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}System"{}},\ bit\ =\ 0)]}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}touchpadButton"{}},\ layout\ =\ \textcolor{stringliteral}{"{}Button"{}},\ displayName\ =\ \textcolor{stringliteral}{"{}Touchpad\ Press"{}},\ bit\ =\ 1)]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(7)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ buttons3;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}leftTrigger"{}},\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}})]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(8)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ leftTrigger;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [InputControl(name\ =\ \textcolor{stringliteral}{"{}rightTrigger"{}},\ format\ =\ \textcolor{stringliteral}{"{}BYTE"{}})]}
\DoxyCodeLine{\ \ \ \ [FieldOffset(9)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ rightTrigger;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [FieldOffset(30)]\ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}\ batteryLevel;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1393}{}\doxysubsubsection{\texorpdfstring{Step 2\+: The Input\+Device}{Step 2\+: The Input\+Device}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1393}
Next, you need an {\ttfamily Input\+Device} to represent your device. Because you\textquotesingle{}re dealing with a gamepad, you must create a new subclass of {\ttfamily Gamepad}.

For simplicity, this example ignores the fact that there is a {\ttfamily Dual\+Shock\+Gamepad} class that the actual {\ttfamily Dual\+Shock\+Gamepad\+HID} is based on.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Using\ InputControlLayoutAttribute,\ we\ tell\ the\ system\ about\ the\ state}}
\DoxyCodeLine{\textcolor{comment}{//\ struct\ we\ created,\ which\ includes\ where\ to\ find\ all\ the\ InputControl}}
\DoxyCodeLine{\textcolor{comment}{//\ attributes\ that\ we\ placed\ on\ there.\ This\ is\ how\ the\ Input\ System\ knows}}
\DoxyCodeLine{\textcolor{comment}{//\ what\ controls\ to\ create\ and\ how\ to\ configure\ them.}}
\DoxyCodeLine{[InputControlLayout(stateType\ =\ typeof(DualShock4HIDInputReport)]}
\DoxyCodeLine{\textcolor{keyword}{public}\ DualShock4GamepadHID\ :\ Gamepad}
\DoxyCodeLine{\{}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1394}{}\doxysubsubsection{\texorpdfstring{Step 3\+: Registering the Device}{Step 3\+: Registering the Device}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_h_i_d_autotoc_md1394}
The last step is to register your new type of Device and set up the Input \doxylink{namespace_system}{System} so that when a PS4 controller is connected, the Input \doxylink{namespace_system}{System} generates your custom Device instead of using the default HID fallback.

This only requires a call to \href{../api/UnityEngine.InputSystem.InputSystem.html\#UnityEngine_InputSystem_InputSystem_RegisterLayout__1_System_String_System_Nullable_UnityEngine_InputSystem_Layouts_InputDeviceMatcher__}{\texttt{ {\ttfamily Input\+System.\+Register\+Layout\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}}}}, giving it an \href{../api/UnityEngine.InputSystem.Layouts.InputDeviceMatcher.html}{\texttt{ {\ttfamily Input\+Device\+Matcher}}} that matches the description for a PS4 Dual\+Shock HID. In theory, you can place this call anywhere, but the best point for registering layouts is generally during startup. Doing so ensures that your custom layout is visible to the \doxylink{namespace_unity}{Unity} Editor and therefore exposed, for example, in the Input Control picker.

You can insert your registration into the startup sequence by modifying the code for your {\ttfamily Dual\+Shock4\+Gamepad\+HID} Device as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{[InputControlLayout(stateType\ =\ typeof(DualShock4HIDInputReport)]}
\DoxyCodeLine{\#\textcolor{keywordflow}{if}\ UNITY\_EDITOR}
\DoxyCodeLine{[InitializeOnLoad]\ \textcolor{comment}{//\ Make\ sure\ static\ constructor\ is\ called\ during\ startup.}}
\DoxyCodeLine{\#endif}
\DoxyCodeLine{\textcolor{keyword}{public}\ DualShock4GamepadHID\ :\ Gamepad}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{static}\ DualShock4GamepadHID()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ one\ way\ to\ match\ the\ Device.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ InputSystem.RegisterLayout<DualShock4GamepadHID>(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ InputDeviceMatcher()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithInterface(\textcolor{stringliteral}{"{}HID"{}})}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithManufacturer(\textcolor{stringliteral}{"{}Sony.+Entertainment"{}})}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithProduct(\textcolor{stringliteral}{"{}Wireless\ Controller"{}}));}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Alternatively,\ you\ can\ also\ match\ by\ PID\ and\ VID,\ which\ is\ generally}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ more\ reliable\ for\ HIDs.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ InputSystem.RegisterLayout<DualShock4GamepadHID>(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ matches:\ \textcolor{keyword}{new}\ InputDeviceMatcher()}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithInterface(\textcolor{stringliteral}{"{}HID"{}})}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithCapability(\textcolor{stringliteral}{"{}vendorId"{}},\ 0x54C)\ \textcolor{comment}{//\ Sony\ Entertainment.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .WithCapability(\textcolor{stringliteral}{"{}productId"{}},\ 0x9CC));\ \textcolor{comment}{//\ Wireless\ controller.}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ In\ the\ Player,\ to\ trigger\ the\ calling\ of\ the\ static\ constructor,}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ create\ an\ empty\ method\ annotated\ with\ RuntimeInitializeOnLoadMethod.}}
\DoxyCodeLine{\ \ \ \ [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ Init()\ \{\}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Your custom layout now picks up any Device that matches the manufacturer and product name strings, or the vendor and product IDs in its HID descriptor. The Input \doxylink{namespace_system}{System} now represents a {\ttfamily Dual\+Shock4\+Gamepad\+HID} Device instance.

For more information, you can also read the \href{Devices.md\#matching}{\texttt{ Device matching}} documentation. 