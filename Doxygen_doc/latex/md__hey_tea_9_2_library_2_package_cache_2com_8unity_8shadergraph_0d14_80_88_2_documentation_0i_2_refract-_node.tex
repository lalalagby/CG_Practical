\chapter{Refract Node}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node}\index{Refract Node@{Refract Node}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3700}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3700}%
 \hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3701}{}\doxysection{\texorpdfstring{Description}{Description}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3701}
You can use the Refract node to give a shader a refraction effect. The Refract node generates a refraction using the following to produce a new refracted vector\+:


\begin{DoxyItemize}
\item A normalized incident vector.
\item A normalized normal vector of the surface.
\item The refractive index of the source and the medium.
\end{DoxyItemize}

The Refract node uses the principles described in \href{https://en.wikipedia.org/wiki/Snell\%27s_law}{\texttt{ Snell\textquotesingle{}s Law}}. A medium\textquotesingle{}s refractive index has an angle where the surface behaves like a perfect mirror. This angle is called total internal reflection. To avoid a NaN result, set the Refract node\textquotesingle{}s {\bfseries{Mode}} to {\bfseries{Safe}}. This makes the Refract node generate a null vector when it reaches the critical angle before total internal reflection.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3702}{}\doxysection{\texorpdfstring{Ports}{Ports}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3702}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Direction   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Binding   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Direction   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Binding   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-5}
\endhead
Incident   &Input   &Vector   &None   &The normalized vector from the light source to the surface.~\newline
For example, this could be from a light source to a pixel, or from the Camera to a surface.    \\\cline{1-5}
Normal   &Input   &Vector   &None   &The normalized normal of the surface that causes the refraction.    \\\cline{1-5}
IOR Source   &Input   &Float   &None   &The refractive index of the medium the light source originates in.    \\\cline{1-5}
IOR Medium   &Input   &Float   &None   &The refractive index of the medium that the light refracts into.    \\\cline{1-5}
Refracted   &Output   &Vector   &None   &The refracted vector.    \\\cline{1-5}
Intensity   &Output   &Float   &None   &Intensity of the refraction.   \\\cline{1-5}
\end{longtabu}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3703}{}\doxysection{\texorpdfstring{Controls}{Controls}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3703}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Options   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Name   }&\cellcolor{\tableheadbgcolor}\textbf{ Type   }&\cellcolor{\tableheadbgcolor}\textbf{ Options   }&\cellcolor{\tableheadbgcolor}\textbf{ Description    }\\\cline{1-4}
\endhead
Mode   &Dropdown   &\multicolumn{2}{l|}{\&\#8226; {\bfseries{Safe\+:}} Returns a null vector result instead of a NaN result at the point of critical angle refraction. ~\newline
\&\#8226; {\bfseries{Critical\+Angle\+:}} Avoids the {\bfseries{Safe}} check for a potential NaN result.   }\\\cline{1-4}
\end{longtabu}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3704}{}\doxysection{\texorpdfstring{Generated Code Example}{Generated Code Example}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8shadergraph_0d14_80_88_2_documentation_0i_2_refract-_node_autotoc_md3704}
The following example code represents one possible outcome of this node.


\begin{DoxyCode}{0}
\DoxyCodeLine{void\ Unity\_RefractCriticalAngle(float3\ Incident,\ float3\ Normal,\ float\ IORInput,\ float\ IORMedium,\ out\ float\ Out)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \$precision\ internalIORInput\ =\ max(IORInput,\ 1.0);}
\DoxyCodeLine{\ \ \ \ \$precision\ internalIORMedium\ =\ max(IORMedium,\ 1.0);}
\DoxyCodeLine{\ \ \ \ \$precision\ eta\ =\ internalIORInput/internalIORMedium;}
\DoxyCodeLine{\ \ \ \ \$precision\ cos0\ =\ dot(Incident,\ Normal);}
\DoxyCodeLine{\ \ \ \ \$precision\ k\ =\ 1.0\ -\/\ eta*eta*(1.0\ -\/\ cos0*cos0);}
\DoxyCodeLine{\ \ \ \ Refracted\ =\ k\ >=\ 0.0\ ?\ eta*Incident\ -\/\ (eta*cos0\ +\ sqrt(k))*Normal\ :\ reflect(Incident,\ Normal);}
\DoxyCodeLine{\ \ \ \ Intensity\ =\ internalIORSource\ <=\ internalIORMedium\ ?;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ saturate(F\_Transm\_Schlick(IorToFresnel0(internalIORMedium,\ internalIORSource),\ -\/cos0))\ :}
\DoxyCodeLine{\ \ \ \ \ \ \ \ (k\ >=\ 0.0\ ?\ saturate(F\_FresnelDielectric(internalIORMedium/internalIORSource,\ -\/cos0))\ :\ 0.0);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{void\ Unity\_RefractSafe(float3\ Incident,\ float3\ Normal,\ float\ IORInput,\ float\ IORMedium,\ out\ float\ Out)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \$precision\ internalIORInput\ =\ max(IORInput,\ 1.0);}
\DoxyCodeLine{\ \ \ \ \$precision\ internalIORMedium\ =\ max(IORMedium,\ 1.0);}
\DoxyCodeLine{\ \ \ \ \$precision\ eta\ =\ internalIORInput/internalIORMedium;}
\DoxyCodeLine{\ \ \ \ \$precision\ cos0\ =\ dot(Incident,\ Normal);}
\DoxyCodeLine{\ \ \ \ \$precision\ k\ =\ 1.0\ -\/\ eta*eta*(1.0\ -\/\ cos0*cos0);}
\DoxyCodeLine{\ \ \ \ Refracted\ =\ eta*Incident\ -\/\ (eta*cos0\ +\ sqrt(max(k,\ 0.0)))*Normal;}
\DoxyCodeLine{\ \ \ \ Intensity\ =\ internalIORSource\ <=\ internalIORMedium\ ?;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ saturate(F\_Transm\_Schlick(IorToFresnel0(internalIORMedium,\ internalIORSource),\ -\/cos0))\ :}
\DoxyCodeLine{\ \ \ \ \ \ \ \ (k\ >=\ 0.0\ ?\ saturate(F\_FresnelDielectric(internalIORMedium/internalIORSource,\ -\/cos0))\ :\ 1.0);}
\DoxyCodeLine{\}}

\end{DoxyCode}
 