\chapter{Constant intrinsic}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8burst_0d1_88_87_2_documentation_0i_2optimization-constant}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8burst_0d1_88_87_2_documentation_0i_2optimization-constant}\index{Constant intrinsic@{Constant intrinsic}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8burst_0d1_88_87_2_documentation_0i_2optimization-constant_autotoc_md418}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8burst_0d1_88_87_2_documentation_0i_2optimization-constant_autotoc_md418}%
 Use the \href{xref:Unity.Burst.CompilerServices.Constant.IsConstantExpression*}{\texttt{ {\ttfamily Is\+Constant\+Expression}}} intrinsic to check if a given expression is constant at compile-\/time\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\ \#}}
\DoxyCodeLine{\textcolor{keyword}{using\ }static\ \mbox{\hyperlink{namespace_unity}{Unity}}.\mbox{\hyperlink{namespace_unity_1_1_burst}{Burst}}.\mbox{\hyperlink{namespace_unity_1_1_burst_1_1_compiler_services}{CompilerServices}}.\mbox{\hyperlink{class_unity_1_1_burst_1_1_compiler_services_1_1_constant}{Constant}};}
\DoxyCodeLine{}
\DoxyCodeLine{var\ somethingWhichWillBeConstantFolded\ =\ math.pow(42.0f,\ 42.0f);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}\ (IsConstantExpression(somethingWhichWillBeConstantFolded))}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Burst\ knows\ that\ somethingWhichWillBeConstantFolded\ is\ a\ compile-\/time\ constant}}
\DoxyCodeLine{\}}

\end{DoxyCode}


This is useful to check if a complex expression is always constant folded. You can use it for optimizations for a known constant value. For example, if you want to implement a {\ttfamily pow}-\/like function for integer powers\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\ \#}}
\DoxyCodeLine{\textcolor{keyword}{using\ }static\ \mbox{\hyperlink{namespace_unity}{Unity}}.\mbox{\hyperlink{namespace_unity_1_1_burst}{Burst}}.\mbox{\hyperlink{namespace_unity_1_1_burst_1_1_compiler_services}{CompilerServices}}.\mbox{\hyperlink{class_unity_1_1_burst_1_1_compiler_services_1_1_constant}{Constant}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ MyAwesomePow(\textcolor{keywordtype}{float}\ f,\ \textcolor{keywordtype}{int}\ i)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (IsConstantExpression(i)\ \&\&\ (2\ ==\ i))}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\ *\ f;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math.pow(f,\ (\textcolor{keywordtype}{float})i);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


The {\ttfamily Is\+Constant\+Expression} check means that \doxylink{namespace_burst}{Burst} always removes the branch if {\ttfamily i} isn\textquotesingle{}t constant, because the if condition is false. This means that if {\ttfamily i} is constant and is equal to 2, you can use a more optimal simple multiply instead.

\texorpdfstring{$>$}{>}\mbox{[}!\+NOTE\mbox{]} \begin{quote}
Constant folding only takes place during optimizations. If you\textquotesingle{}ve disabled optimizations, the intrinsic returns false. \end{quote}
