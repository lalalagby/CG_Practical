\chapter{Drawing a texture}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do92cbff61267a4ef6cd2a05431c845525}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do92cbff61267a4ef6cd2a05431c845525}\index{Drawing a texture@{Drawing a texture}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do92cbff61267a4ef6cd2a05431c845525_autotoc_md2711}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do92cbff61267a4ef6cd2a05431c845525_autotoc_md2711}%
 The \doxylink{namespace_unity}{Unity} shader in this example draws a texture on the mesh.

Use the \doxylink{namespace_unity}{Unity} shader source file from section \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do371daa0f53e84dc8e548070f6e70d5f1}{URP unlit shader with color input}{0} and make the following changes to the Shader\+Lab code\+:


\begin{DoxyEnumerate}
\item In the Properties block, replace the existing code with the {\ttfamily \+\_\+\+Base\+Map} property definition.


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ Properties}
\DoxyCodeLine{\ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ [MainTexture]\ \_BaseMap(\textcolor{stringliteral}{"{}Base\ Map"{}},\ 2D)\ =\ \textcolor{stringliteral}{"{}white"{}}}
\DoxyCodeLine{\ \ \ \}}

\end{DoxyCode}


When you declare a texture property in the Properties block, \doxylink{namespace_unity}{Unity} adds the {\ttfamily \+\_\+\+Base\+Map} property with the label {\bfseries{Base Map}} to the Material, and adds the Tiling and the Offset controls.

\texorpdfstring{$<$}{<}img src="{}\+Images/shader-\/examples/unlit-\/shader-\/tutorial-\/texture-\/property-\/in-\/inspector.\+png"{} alt="{}"{}Texture property with Tiling and Offset controls"{}"{}/\texorpdfstring{$>$}{>}

When you declare a property with the {\ttfamily \mbox{[}Main\+Texture\mbox{]}} attribute, \doxylink{namespace_unity}{Unity} uses this property as the \href{https://docs.unity3d.com/ScriptReference/Material-mainTexture.html}{\texttt{ main texture}} of the Material.

\texorpdfstring{$>$}{>} {\bfseries{Note}}\+: For compatibility reasons, the {\ttfamily \+\_\+\+Main\+Tex} property name is a reserved name. \doxylink{namespace_unity}{Unity} uses a property with the name {\ttfamily \+\_\+\+Main\+Tex} as the \href{https://docs.unity3d.com/ScriptReference/Material-mainTexture.html}{\texttt{ main texture}} even it does not have the {\ttfamily \mbox{[}Main\+Texture\mbox{]}} attribute.
\item In {\ttfamily struct Attributes} and {\ttfamily struct Varyings}, add the {\ttfamily uv} variable for the UV coordinates on the texture\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ float2\ uv\ \ \ \ \ \ \ \ \ \ \ :\ TEXCOORD0;}

\end{DoxyCode}

\item Define the texture as a 2D texture and specify a sampler for it. Add the following lines before the CBUFFER block\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ TEXTURE2D(\_BaseMap);}
\DoxyCodeLine{\ \ \ SAMPLER(sampler\_BaseMap);}

\end{DoxyCode}


The TEXTURE2D and the SAMPLER macros are defined in one of the files referenced in {\ttfamily Core.\+hlsl}.
\item For tiling and offset to work, it\textquotesingle{}s necessary to declare the texture property with the {\ttfamily \+\_\+\+ST} suffix in the \textquotesingle{}CBUFFER\textquotesingle{} block. The {\ttfamily \+\_\+\+ST} suffix is necessary because some macros (for example, {\ttfamily TRANSFORM\+\_\+\+TEX}) use it.
\end{DoxyEnumerate}

\begin{quote}
{\bfseries{NOTE}}\+: To ensure that the \doxylink{namespace_unity}{Unity} shader is SRP Batcher compatible, declare all Material properties inside a single {\ttfamily CBUFFER} block with the name {\ttfamily Unity\+Per\+Material}. For more information on the SRP Batcher, see the page \href{https://docs.unity3d.com/Manual/SRPBatcher.html}{\texttt{ Scriptable Render Pipeline (SRP) Batcher}}. \end{quote}


{\ttfamily c++ CBUFFER\+\_\+\+START(\+Unity\+Per\+Material) float4 \+\_\+\+Base\+Map\+\_\+\+ST; CBUFFER\+\_\+\+END }


\begin{DoxyEnumerate}
\item To apply the tiling and offset transformation, add the following line in the vertex shader\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ OUT.uv\ =\ TRANSFORM\_TEX(IN.uv,\ \_BaseMap);}

\end{DoxyCode}


The {\ttfamily TRANSFORM\+\_\+\+TEX} macro is defined in the {\ttfamily Macros.\+hlsl} file. The {\ttfamily \#include} declaration contains a reference to that file.
\item In the fragment shader, use the {\ttfamily SAMPLE\+\_\+\+TEXTURE2D} macro to sample the texture\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{++}
\DoxyCodeLine{\ \ \ half4\ frag(Varyings\ IN)\ :\ SV\_Target}
\DoxyCodeLine{\ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ half4\ color\ =\ SAMPLE\_TEXTURE2D(\_BaseMap,\ sampler\_BaseMap,\ IN.uv);}
\DoxyCodeLine{\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ color;}
\DoxyCodeLine{\ \ \ \}}

\end{DoxyCode}

\end{DoxyEnumerate}

Now you can select a texture in the {\bfseries{Base Map}} field in the Inspector window. The shader draws that texture on the mesh.



Below is the complete Shader\+Lab code for this example.


\begin{DoxyCode}{0}
\DoxyCodeLine{\ ++}
\DoxyCodeLine{\textcolor{comment}{//\ This\ shader\ draws\ a\ texture\ on\ the\ mesh.}}
\DoxyCodeLine{Shader\ \textcolor{stringliteral}{"{}Example/URPUnlitShaderTexture"{}}}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ The\ \_BaseMap\ variable\ is\ visible\ in\ the\ Material's\ Inspector,\ as\ a\ field}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ called\ Base\ Map.}}
\DoxyCodeLine{\ \ \ \ Properties}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ [MainTexture]\ \_BaseMap(\textcolor{stringliteral}{"{}Base\ Map"{}},\ 2D)\ =\ \textcolor{stringliteral}{"{}white"{}}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ SubShader}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Tags\ \{\ \textcolor{stringliteral}{"{}RenderType"{}}\ =\ \textcolor{stringliteral}{"{}Opaque"{}}\ \textcolor{stringliteral}{"{}RenderPipeline"{}}\ =\ \textcolor{stringliteral}{"{}UniversalPipeline"{}}\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Pass}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ HLSLPROGRAM}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#pragma\ vertex\ vert}}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#pragma\ fragment\ frag}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ "{}Packages/com.unity.render-\/pipelines.universal/ShaderLibrary/Core.hlsl"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }Attributes}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float4\ positionOS\ \ \ :\ POSITION;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ uv\ variable\ contains\ the\ UV\ coordinate\ on\ the\ texture\ for\ the}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ given\ vertex.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float2\ uv\ \ \ \ \ \ \ \ \ \ \ :\ TEXCOORD0;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }Varyings}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float4\ positionHCS\ \ :\ SV\_POSITION;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ uv\ variable\ contains\ the\ UV\ coordinate\ on\ the\ texture\ for\ the}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ given\ vertex.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float2\ uv\ \ \ \ \ \ \ \ \ \ \ :\ TEXCOORD0;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ macro\ declares\ \_BaseMap\ as\ a\ Texture2D\ object.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ TEXTURE2D(\_BaseMap);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ macro\ declares\ the\ sampler\ for\ the\ \_BaseMap\ texture.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ SAMPLER(sampler\_BaseMap);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ CBUFFER\_START(UnityPerMaterial)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ following\ line\ declares\ the\ \_BaseMap\_ST\ variable,\ so\ that\ you}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can\ use\ the\ \_BaseMap\ variable\ in\ the\ fragment\ shader.\ The\ \_ST}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ suffix\ is\ necessary\ for\ the\ tiling\ and\ offset\ function\ to\ work.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float4\ \_BaseMap\_ST;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ CBUFFER\_END}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ Varyings\ vert(Attributes\ IN)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Varyings\ OUT;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT.positionHCS\ =\ TransformObjectToHClip(IN.positionOS.xyz);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ TRANSFORM\_TEX\ macro\ performs\ the\ tiling\ and\ offset}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ transformation.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OUT.uv\ =\ TRANSFORM\_TEX(IN.uv,\ \_BaseMap);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ OUT;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ half4\ frag(Varyings\ IN)\ :\ SV\_Target}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ SAMPLE\_TEXTURE2D\ marco\ samples\ the\ texture\ with\ the\ given}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ sampler.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ half4\ color\ =\ SAMPLE\_TEXTURE2D(\_BaseMap,\ sampler\_BaseMap,\ IN.uv);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ color;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ ENDHLSL}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Section \doxysectlink{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8render-pipelines_8universal_0d14_80_88_2_do93945fe33cc7a050828f7ab1184ad1b6}{Visualizing normal vectors}{0} shows how to visualize normal vectors on the mesh. 