\chapter{Input testing}
\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing}{}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing}\index{Input testing@{Input testing}}
\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1575}%
\Hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1575}%
 The Input \doxylink{namespace_system}{System} has built-\/in support for writing automated input tests. You can drive input entirely from code, without any dependencies on platform backends and physical hardware devices. The automated input tests you write consider the generated input to be the same as input generated at runtime by actual platform code.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1576}{}\doxysection{\texorpdfstring{Setting up test assemblies}{Setting up test assemblies}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1576}
To set up a test assembly that uses the Input \doxylink{namespace_system}{System}\textquotesingle{}s automation framework, follow these steps\+:


\begin{DoxyEnumerate}
\item In the {\ttfamily Packages/manifest.\+json} file of your project, {\ttfamily com.\+unity.\+inputsystem} must be listed in {\ttfamily testables}. This is necessary for test code that comes with the package to be included with test builds of your project.~\newline
~\newline
You can, for example, add this after the {\ttfamily dependencies} property like so\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\},}
\DoxyCodeLine{"{}testables"{}\ :\ [}
\DoxyCodeLine{\ \ \ \ "{}com.unity.inputsystem"{}}
\DoxyCodeLine{]}

\end{DoxyCode}

\item Create a new assembly definition (menu\+: {\bfseries{Create \texorpdfstring{$>$}{>} Assembly Definition}}) or go to an assembly definition for a test assembly that you have already created.
\item Add references to {\ttfamily nunit.\+framework.\+dll}, {\ttfamily \doxylink{namespace_unity_engine_1_1_test_runner}{Unity\+Engine.\+Test\+Runner}}, and {\ttfamily \doxylink{namespace_unity_editor_1_1_test_runner}{Unity\+Editor.\+Test\+Runner}} (as described in \href{https://docs.unity3d.com/Packages/com.unity.test-framework@1.0/manual/workflow-create-test-assembly.html}{\texttt{ How to create a new test assembly}}), as well as {\ttfamily Unity.\+Input\+System} and {\ttfamily Unity.\+Input\+System.\+Test\+Framework} for the Input \doxylink{namespace_system}{System}.
\end{DoxyEnumerate}

\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1577}{}\doxysection{\texorpdfstring{Setting up test fixtures}{Setting up test fixtures}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1577}
Use \href{../api/UnityEngine.InputSystem.InputTestFixture.html}{\texttt{ {\ttfamily Input\+Test\+Fixture}}} to create an isolated version of the Input \doxylink{namespace_system}{System} for tests. The fixture sets up a blank, default-\/initialized version of the Input \doxylink{namespace_system}{System} for each test, and restores the Input \doxylink{namespace_system}{System} to its original state after the test completes. The default-\/initialized version has all built-\/in registrations (such as layout and processors), but doesn\textquotesingle{}t have any pre-\/existing Input Devices.

\texorpdfstring{$>$}{>}{\bfseries{NOTE\+:}} \href{../api/UnityEngine.InputSystem.InputTestFixture.html}{\texttt{ {\ttfamily Input\+Test\+Fixture}}} will not have custom registrations performed from \doxylink{namespace_unity}{Unity} startup code such as {\ttfamily \mbox{[}Initialize\+On\+Load\mbox{]}} or {\ttfamily \mbox{[}Runtime\+Initialize\+On\+Load\+Method\mbox{]}}. Layouts needed during tests have to be manually registered as part of the test setup.

You can use the fixture as a base class for your own fixture\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class\ }MyTests\ :\ InputTestFixture}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ [Test]}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ CanPressButtonOnGamepad()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ var\ gamepad\ =\ InputSystem.AddDevice<Gamepad>();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Press(gamepad.buttonSouth);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ If\ you\ need\ custom\ setup\ and\ tear-\/down\ logic,\ override\ the\ methods\ inherited}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ from\ InputTestFixture.}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ IMPORTANT:\ If\ you\ use\ NUnit's\ [Setup]\ and\ [TearDown]\ attributes\ on\ methods\ in\ your}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ test\ fixture,\ this\ will\ *override*\ the\ methods\ inherited\ from}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ InputTestFixture\ and\ thus\ cause\ them\ to\ not\ get\ executed.\ Either}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ override\ the\ methods\ as\ illustrated\ here\ or\ call\ the\ Setup()\ and}}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ TearDown()\ methods\ of\ InputTestFixture\ explicitly.}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{override}\ \textcolor{keywordtype}{void}\ Setup()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ base.Setup();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ setup\ code\ here.}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{override}\ \textcolor{keywordtype}{void}\ TearDown()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Add\ teardown\ code\ here.}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ base.TearDown();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\texorpdfstring{$>$}{>}{\bfseries{IMPORTANT\+:}} If you do this, do {\bfseries{not}} add a {\ttfamily \mbox{[}Set\+Up\mbox{]}} or {\ttfamily \mbox{[}Tear\+Down\mbox{]}} method. Doing so will cause the methods in \href{../api/UnityEngine.InputSystem.InputTestFixture.html}{\texttt{ {\ttfamily Input\+Test\+Fixture}}} to not be called, thus leading to the test fixture not properly initializing or shutting down. Instead, override the {\ttfamily Setup} and/or {\ttfamily Tear\+Down} method inherited from {\ttfamily Input\+Test\+Fixture}.

Alternatively, you can instantiate it in your fixture\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{[TestFixture]}
\DoxyCodeLine{\textcolor{keyword}{class\ }MyTestFixture}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{private}\ InputTestFixture\ input\ =\ \textcolor{keyword}{new}\ InputTestFixture();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ NOTE:\ You\ have\ to\ manually\ call\ Setup()\ and\ TearDown()\ in\ this\ scenario.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [SetUp]}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ Setup()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ input.Setup();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ [TearDown]}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ TearDown()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ input.TearDown();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


This is especially useful when creating a larger setup for game testing using {\ttfamily Prebuilt\+Setup}.


\begin{DoxyCode}{0}
\DoxyCodeLine{[PrebuildSetup(\textcolor{stringliteral}{"{}GameTestPrebuildSetup"{}})]}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keyword}{class\ }GameTestFixture}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ Game\ game\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ InputTestFixture\ input\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ Mouse\ mouse\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ Keyboard\ keyboard\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ Touchscreen\ touchscreen\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ Gamepad\ gamepad\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//...}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#if\ UNITY\_EDITOR}}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keyword}{class\ }GameTestPrebuildSetup\ :\ IPrebuildSetup}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ Setup()}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ UnityEditor.EditorBuildSettings.scenes\ =\ \textcolor{keyword}{new}[]}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ \mbox{\hyperlink{namespace_unity_editor}{UnityEditor}}.EditorBuildSettingsScene(\textcolor{stringliteral}{"{}Assets/Scenes/Main.unity"{}},\ \textcolor{keyword}{true})}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{preprocessor}{\#endif}}

\end{DoxyCode}


Note that you do {\bfseries{not}} generally need to clean up any input-\/related data you set up. This includes devices you add, layouts you registered, \href{../api/UnityEngine.InputSystem.InputSystem.html\#UnityEngine_InputSystem_InputSystem_settings}{\texttt{ {\ttfamily Input\+Settings}}} you modify, and any other alteration to the state of \href{../api/UnityEngine.InputSystem.InputSystem.html}{\texttt{ {\ttfamily Input\+System}}}. \href{../api/UnityEngine.InputSystem.InputTestFixture.html}{\texttt{ {\ttfamily Input\+Test\+Fixture}}} will automatically throw away the current state of the Input \doxylink{namespace_system}{System} and restore the state from before the test was started.\hypertarget{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1578}{}\doxysection{\texorpdfstring{Writing tests}{Writing tests}}\label{md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_testing_autotoc_md1578}
When writing a test, use \href{../api/UnityEngine.InputSystem.InputSystem.html\#UnityEngine_InputSystem_InputSystem_AddDevice__1_System_String_}{\texttt{ {\ttfamily Input\+System.\+Add\+Device\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}()}}} to add new Devices.


\begin{DoxyCode}{0}
\DoxyCodeLine{[Test]}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ PlayerInput\_CanInstantiatePlayer\_WithSpecificControlScheme()}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ InputSystem.AddDevice<Gamepad>();}
\DoxyCodeLine{\ \ \ \ var\ keyboard\ =\ InputSystem.AddDevice<Keyboard>();}
\DoxyCodeLine{\ \ \ \ var\ mouse\ =\ InputSystem.AddDevice<Mouse>();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ var\ prefab\ =\ \textcolor{keyword}{new}\ GameObject();}
\DoxyCodeLine{\ \ \ \ prefab.SetActive(\textcolor{keyword}{false});}
\DoxyCodeLine{\ \ \ \ var\ prefabPlayerInput\ =\ prefab.AddComponent<PlayerInput>();}
\DoxyCodeLine{\ \ \ \ prefabPlayerInput.actions\ =\ InputActionAsset.FromJson(kActions);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ var\ player\ =\ PlayerInput.Instantiate(prefab,\ controlScheme:\ \textcolor{stringliteral}{"{}Keyboard\&Mouse"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ Assert.That(player.devices,\ Is.EquivalentTo(\textcolor{keyword}{new}\ InputDevice[]\ \{\ keyboard,\ mouse\ \}));}
\DoxyCodeLine{\ \ \ \ Assert.That(player.controlScheme,\ Is.EqualTo(\textcolor{stringliteral}{"{}Keyboard\&Mouse"{}}));}
\DoxyCodeLine{\}}

\end{DoxyCode}


To feed input, the easiest way is to use the \href{../api/UnityEngine.InputSystem.InputTestFixture.html\#UnityEngine_InputSystem_InputTestFixture_Press_UnityEngine_InputSystem_Controls_ButtonControl_System_Double_System_Double_System_Boolean_}{\texttt{ {\ttfamily Press(button)}}}, \href{../api/UnityEngine.InputSystem.InputTestFixture.html\#UnityEngine_InputSystem_InputTestFixture_Release_UnityEngine_InputSystem_Controls_ButtonControl_System_Double_System_Double_System_Boolean_}{\texttt{ {\ttfamily Release(button)}}}, \href{../api/UnityEngine.InputSystem.InputTestFixture.html\#UnityEngine_InputSystem_InputTestFixture_PressAndRelease_UnityEngine_InputSystem_Controls_ButtonControl_System_Double_System_Double_System_Boolean_}{\texttt{ {\ttfamily Press\+And\+Release(button)}}}, {\ttfamily Set(control,value)}, and \href{../api/UnityEngine.InputSystem.InputTestFixture.html\#UnityEngine_InputSystem_InputTestFixture_Trigger_UnityEngine_InputSystem_InputAction_}{\texttt{ {\ttfamily Trigger(action)}}} helper methods provided by \href{../api/UnityEngine.InputSystem.InputTestFixture.html}{\texttt{ {\ttfamily Input\+Test\+Fixture}}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{[Test]}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ Actions\_WhenDisabled\_CancelAllStartedInteractions()}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ var\ gamepad\ =\ InputSystem.AddDevice<Gamepad>();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ var\ action1\ =\ \textcolor{keyword}{new}\ InputAction(\textcolor{stringliteral}{"{}action1"{}},\ binding:\ \textcolor{stringliteral}{"{}<Gamepad>/buttonSouth"{}},\ interactions:\ \textcolor{stringliteral}{"{}Hold"{}});}
\DoxyCodeLine{\ \ \ \ var\ action2\ =\ \textcolor{keyword}{new}\ InputAction(\textcolor{stringliteral}{"{}action2"{}},\ binding:\ \textcolor{stringliteral}{"{}<Gamepad>/leftStick"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ action1.Enable();}
\DoxyCodeLine{\ \ \ \ action2.Enable();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ Press(gamepad.buttonSouth);}
\DoxyCodeLine{\ \ \ \ Set(gamepad.leftStick,\ \textcolor{keyword}{new}\ Vector2(0.123f,\ 0.234f));}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{using}\ (var\ trace\ =\ \textcolor{keyword}{new}\ InputActionTrace())}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ trace.SubscribeTo(action1);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ trace.SubscribeTo(action2);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ runtime.currentTime\ =\ 0.234f;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ runtime.advanceTimeEachDynamicUpdate\ =\ 0;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ action1.Disable();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ action2.Disable();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ var\ actions\ =\ trace.ToArray();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ Assert.That(actions.Length,\ Is.EqualTo(2));}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{comment}{//...}}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}


Alternatively, you can use code to feed arbitrary input events into the system, and run arbitrary input updates\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{[Test]}
\DoxyCodeLine{\textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ PlayerInput\_JoiningPlayerThroughButtonPress\_WillFailIfDeviceIsNotUsableWithPlayerActions()}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ var\ playerPrefab\ =\ \textcolor{keyword}{new}\ GameObject();}
\DoxyCodeLine{\ \ \ \ playerPrefab.SetActive(\textcolor{keyword}{false});}
\DoxyCodeLine{\ \ \ \ playerPrefab.AddComponent<PlayerInput>();}
\DoxyCodeLine{\ \ \ \ playerPrefab.GetComponent<PlayerInput>().actions\ =\ InputActionAsset.FromJson(kActions);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ var\ manager\ =\ \textcolor{keyword}{new}\ GameObject();}
\DoxyCodeLine{\ \ \ \ var\ listener\ =\ manager.AddComponent<MessageListener>();}
\DoxyCodeLine{\ \ \ \ var\ managerComponent\ =\ manager.AddComponent<PlayerInputManager>();}
\DoxyCodeLine{\ \ \ \ managerComponent.joinBehavior\ =\ \mbox{\hyperlink{namespace_unity_engine_1_1_input_system_a796c76b3780bf45a3f9701158d83e199}{PlayerJoinBehavior}}.JoinPlayersWhenButtonIsPressed;}
\DoxyCodeLine{\ \ \ \ managerComponent.playerPrefab\ =\ playerPrefab;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Create\ a\ Device\ based\ on\ the\ HID\ layout\ with\ a\ single\ button\ control.}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{string}\ kLayout\ =\ \textcolor{stringliteral}{@"{}}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ "{}"{}name"{}"{}\ :\ "{}"{}TestDevice"{}"{},}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ "{}"{}extend"{}"{}\ :\ "{}"{}HID"{}"{},}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ "{}"{}controls"{}"{}\ :\ [}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ "{}"{}name"{}"{}\ :\ "{}"{}button"{}"{},\ "{}"{}layout"{}"{}\ :\ "{}"{}Button"{}"{}\ \}}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ ]}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{\textcolor{stringliteral}{\ \ \ \ "{}};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ InputSystem.RegisterLayout(kLayout);}
\DoxyCodeLine{\ \ \ \ var\ device\ =\ InputSystem.AddDevice(\textcolor{stringliteral}{"{}TestDevice"{}});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{using}\ (StateEvent.From(device,\ out\ var\ eventPtr))}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ((ButtonControl)device[\textcolor{stringliteral}{"{}button"{}}]).WriteValueIntoEvent(1f,\ eventPtr);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ InputSystem.QueueEvent(eventPtr);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ InputSystem.Update();}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ Assert.That(listener.messages,\ Is.Empty);}
\DoxyCodeLine{\ \ \ \ Assert.That(PlayerInput.all,\ Is.Empty);}
\DoxyCodeLine{\}}

\end{DoxyCode}


\texorpdfstring{$>$}{>}{\bfseries{Note}}\+: For reference, you can find the tests for the Input \doxylink{namespace_system}{System} itself in its \href{https://github.com/Unity-Technologies/InputSystem/tree/stable/Assets/Tests/InputSystem}{\texttt{ Git\+Hub repository}}. 