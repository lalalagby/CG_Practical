<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: On-screen Controls</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">On-screen Controls</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1498"></a> You can use on-screen Controls to simulate Input Devices with UI widgets that the user interacts with on the screen. The most prominent example is the use of stick and button widgets on touchscreens to emulate a joystick or gamepad.</p>
<p>There are currently two Control types implemented out of the box: buttons and sticks. You can implement custom Controls by extending the base <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html"><code>OnScreenControl</code></a> class (see documentation on writing custom on screen Controls to learn more).</p>
<p>&gt;<b>Note</b>: On-screen Controls don't have a predefined visual representation. It's up to you to set up the visual aspect of a Control (for example, by adding a sprite or UI component to the GameObject). On-screen Controls take care of the interaction logic and of setting up and generating input from interactions.</p>
<p>Each on-screen Control uses a <a href="Controls.md#control-paths">Control path</a> to reference the Control that it should report input as. For example, the following on-screen button reports input as the right shoulder button of a gamepad:</p>
<p><img src="Images/OnScreenButton.png" alt="OnScreenButton" class="inline"/></p>
<p>The collection of on-screen Controls present in a Scene forms one or more <a class="el" href="md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_devices.html">Input Devices</a>. The Input <a class="el" href="namespace_system.html">System</a> creates one Input Device for each distinct type of Device the Controls reference. For example, if one on-screen button references <code>&lt;Gamepad&gt;/buttonSouth</code> and another on-screen button references <code>&lt;Keyboard&gt;/a</code>, the Input <a class="el" href="namespace_system.html">System</a> creates both a <code>Gamepad</code> and a <code>Keyboard</code>. This happens automatically when the components are enabled. When disabled, the Input <a class="el" href="namespace_system.html">System</a> automatically removes the Devices again.</p>
<p>To query the Control (and, implicitly, the Device) that an on-screen Control feeds into, you can use the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html#UnityEngine_InputSystem_OnScreen_OnScreenControl_control"><code>OnScreenControl.control</code></a> property.</p>
<p>&gt;<b>Note</b>: This design allows you to use on-screen Controls to create input for arbitrary Input Devices, in addition to joysticks and gamepads.</p>
<h1><a class="anchor" id="autotoc_md1499"></a>
On-screen buttons</h1>
<p>To create an on-screen button:</p>
<ol type="1">
<li>Add a UI <code>Button</code> object.</li>
<li>Add the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenButton.html"><code>OnScreenButton</code></a> component to it.</li>
<li>Set the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html#UnityEngine_InputSystem_OnScreen_OnScreenControl_controlPath"><code>Control Path</code></a> to refer to a <a href="../api/UnityEngine.InputSystem.Controls.ButtonControl.html"><code>ButtonControl</code></a> (for example, <code>&lt;Gamepad&gt;/buttonSouth</code>). The type of device referenced by the control path determines the type of virtual device created by the component.</li>
</ol>
<p><img src="Images/OnScreenButton.png" alt="OnScreenButton" class="inline"/></p>
<p>The <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenButton.html"><code>OnScreenButton</code></a> component requires the target Control to be a <code>Button</code> Control. <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenButton.html"><code>OnScreenButton</code></a> sets the target Control value to 1 when it receives a pointer-down (<code>IPointerDownHandler.OnPointerDown</code>) event, or 0 when it receives a pointer-up (<code>IPointerUpHandler.OnPointerUp</code>) event.</p>
<h1><a class="anchor" id="autotoc_md1500"></a>
On-screen sticks</h1>
<p>To create an on-screen stick:</p>
<ol type="1">
<li>Create a UI <code>Image</code> object.</li>
<li>Add the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html"><code>OnScreenStick</code></a> component to it.</li>
<li>Set the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html#UnityEngine_InputSystem_OnScreen_OnScreenControl_controlPath"><code>Control Path</code></a> to refer to a <a href="../api/UnityEngine.InputSystem.Controls.Vector2Control.html"><code>Vector2Control</code></a> (for example, <code>&lt;Gamepad&gt;/leftStick</code>). The type of device referenced by the control path determines the type of virtual device created by the component.</li>
</ol>
<p><img src="Images/OnScreenStick.png" alt="OnScreenStick" class="inline"/></p>
<p>The <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html"><code>OnScreenStick</code></a> component requires the target Control to be a <code>Vector2</code> Control. <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html"><code>OnScreenStick</code></a> starts the movement of the stick Control when it receives a pointer-down (<code>IPointerDownHandler.OnPointerDown</code>) event, and stops it when it receives a pointer-up (<code>IPointerUpHandler.OnPointerUp</code>) event.</p>
<p>In-between, the stick moves according to the pointer being dragged (<code>IDragHandler.OnDrag</code>) within a box centered on the pointer-down screen point, and with an edge length defined in the component's <b>Movement Range</b> property. A movement range of 50, for example, means that the stick's on-screen area is 25 pixels up, down, left, and right of the pointer-down point on screen.</p>
<p>If you want to be notified when the user starts and/or stops touching the on-screen stick, implement <code>IPointerDownHandler</code> and/or <code>IPointerUpHandler</code> on a component and add it to the stick <code>GameObject</code>.</p>
<h2><a class="anchor" id="autotoc_md1501"></a>
Isolated mode</h2>
<p>The <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html"><code>OnScreenStick</code></a> simulates input events from the device specified in the <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html#UnityEngine_InputSystem_OnScreen_OnScreenControl_control"><code>OnScreenControl.control</code></a> property. To the Input <a class="el" href="namespace_system.html">System</a> itself, these are normal events and can cause the paired device to change in games and applications where dynamic device switching is used, for example when the <a href="../api/UnityEngine.InputSystem.PlayerInput.html"><code>PlayerInput</code></a> component is used with the <a href="../api/UnityEngine.InputSystem.PlayerInput.html#UnityEngine_InputSystem_PlayerInput_neverAutoSwitchControlSchemes"><code>PlayerInput.neverAutoSwitchControlSchemes</code></a>) propety set to false. As the stick is dragged around, the paired device will alternate between the device that owns the pointer (mouse, touch, pen etc) and the device from the control path, which can result in jittery movement of the on-screen stick.</p>
<p>Use Isolated Input Actions to fix this. This mode uses a local set of Input Action instances to drive interaction with the stick, and not the actions defined in the UI. The downside of this mode is that pointer actions will be duplicated in both the on-screen stick component and any Input Action Assets being used to drive the UI. Note that if a set of bindings is not specified for the Pointer Down Action and Pointer Move Actions, the following defaults will be used:</p>
<ul>
<li>Pointer Down Action<ul>
<li><code>&lt;Mouse&gt;/leftButton</code></li>
<li><code>&lt;Pen&gt;/tip</code></li>
<li><code>&lt;Touchscreen&gt;/touch*/press</code></li>
<li><code>&lt;XRController&gt;/trigger</code></li>
</ul>
</li>
<li>Pointer Move Action<ul>
<li><code>&lt;Mouse&gt;/position</code></li>
<li><code>&lt;Pen&gt;/position</code></li>
<li><code>&lt;Touchscreen&gt;/touch*/position</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1502"></a>
Writing custom on-screen Controls</h1>
<p>You can add support for new types of <a class="el" href="md__hey_tea_9_2_library_2_package_cache_2com_8unity_8inputsystem_0d1_86_83_2_documentation_0i_2_controls.html">Input Controls</a> by extending <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenControl.html"><code>OnScreenControl</code></a>. An easy example to follow is <a href="../api/UnityEngine.InputSystem.OnScreen.OnScreenButton.html"><code>OnScreenButton</code></a>.</p>
<div class="fragment"><div class="line">[AddComponentMenu(<span class="stringliteral">&quot;Input/On-Screen Button&quot;</span>)]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>OnScreenButton : OnScreenControl, IPointerDownHandler, IPointerUpHandler</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnPointerUp(PointerEventData data)</div>
<div class="line">    {</div>
<div class="line">        SendValueToControl(0.0f);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnPointerDown(PointerEventData data)</div>
<div class="line">    {</div>
<div class="line">        SendValueToControl(1.0f);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [InputControl(layout = <span class="stringliteral">&quot;Button&quot;</span>)]</div>
<div class="line">    [SerializeField]</div>
<div class="line">    <span class="keyword">private</span> <span class="keywordtype">string</span> m_ControlPath;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">string</span> controlPathInternal</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">get</span> =&gt; m_ControlPath;</div>
<div class="line">        <span class="keyword">set</span> =&gt; m_ControlPath = value;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
