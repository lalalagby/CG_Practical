<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This sample shows how to set up a simple character controller using the input system. As there is more than one way to do it, the sample illustrates several ways. Each demonstration is set up as a separate scene. The basic functionality in all the scenes is the same. You can move and look around and fire projectiles (colored cubes) into the scene. In some scenes, only gamepads are supported but the more involved demonstrations support several different inputs concurrently.</p>
<h1><a class="anchor" id="autotoc_md1614"></a>
SimpleDemo_UsingState</h1>
<p><a href="./SimpleController_UsingState.cs">Source</a></p>
<p>This starts off at the lowest level by demonstrating how to wire up input by polling input state directly in a <code>MonoBehaviour.Update</code> function. For simplicity's sake it only deals with gamepads but the same mechanism works in equivalent ways for other types of input devices (e.g. using <code>Mouse.current</code> and <code>Keyboard.current</code>).</p>
<p>The key APIs demonstrated here are <code>Gamepad.current</code> and <code>InputControl.ReadValue</code>.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_simple_controller___using_state.html">SimpleController_UsingState</a> : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> Update()</div>
<div class="line">    {</div>
<div class="line">        var gamepad = Gamepad.current;</div>
<div class="line">        <span class="keywordflow">if</span> (gamepad == <span class="keyword">null</span>)</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        var move = Gamepad.leftStick.ReadValue();</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_simple_controller___using_state_html"><div class="ttname"><a href="class_simple_controller___using_state.html">SimpleController_UsingState</a></div><div class="ttdef"><b>Definition</b> SimpleController_UsingState.cs:6</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1615"></a>
SimpleDemo_UsingActions</h1>
<p><a href="./SimpleController_UsingActions.cs">Source</a></p>
<p>This moves one level higher and moves input over to "input actions". These are input abstractions that allow you to bind to input sources indirectly.</p>
<p>In this scene, the actions are embedded directly into the character controller component. This allows setting up the bindings for the actions directly in the inspector. To see the actions and their bindings, select the <code><a class="el" href="class_player.html">Player</a></code> object in the hierarchy and look at the <code><a class="el" href="class_simple_controller___using_actions.html">SimpleController_UsingActions</a></code> component in the inspector.</p>
<p>The key APIs demonstrated here are <code>InputAction</code> and its <code>Enable</code>/<code>Disable</code> methods and its <code>ReadValue</code> method.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_simple_controller___using_actions.html">SimpleController_UsingActions</a> : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> InputAction moveAction;</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnEnable()</div>
<div class="line">    {</div>
<div class="line">        moveAction.Enable();</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnDisable()</div>
<div class="line">    {</div>
<div class="line">        moveAction.Disable();</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> Update()</div>
<div class="line">    {</div>
<div class="line">        var move = moveAction.ReadValue&lt;Vector2&gt;();</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_simple_controller___using_actions_html"><div class="ttname"><a href="class_simple_controller___using_actions.html">SimpleController_UsingActions</a></div><div class="ttdef"><b>Definition</b> SimpleController_UsingActions.cs:8</div></div>
</div><!-- fragment --><p>The sample also demonstrates how to use a <code>Tap</code> and a <code>SlowTap</code> interaction on the fire action to implement a charged shooting mechanism. Note that in this case, we run the firing logic right from within the action using the action's <code>started</code>, <code>performed</code>, and <code>canceled</code> callbacks.</p>
<div class="fragment"><div class="line">fireAction.performed +=</div>
<div class="line">    ctx =&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (ctx.interaction is SlowTapInteraction)</div>
<div class="line">    {</div>
<div class="line">        StartCoroutine(BurstFire((<span class="keywordtype">int</span>)(ctx.duration * burstSpeed)));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        Fire();</div>
<div class="line">    }</div>
<div class="line">    m_Charging = <span class="keyword">false</span>;</div>
<div class="line">};</div>
<div class="line">fireAction.started +=</div>
<div class="line">    ctx =&gt;</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (ctx.interaction is SlowTapInteraction)</div>
<div class="line">        m_Charging = <span class="keyword">true</span>;</div>
<div class="line">};</div>
<div class="line">fireAction.canceled +=</div>
<div class="line">    ctx =&gt;</div>
<div class="line">{</div>
<div class="line">    m_Charging = <span class="keyword">false</span>;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1616"></a>
SimpleDemo_UsingActionAsset</h1>
<p><a href="./SimpleController_UsingActionAsset.cs">Source</a></p>
<p>As more and more actions are added, it can become quite tedious to manually set up and <code>Enable</code> and <code>Disable</code> all the actions. We could use an <code>InputActionMap</code> in the component like so</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>SimpleController : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> InputActionMap actions;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnEnable()</div>
<div class="line">    {</div>
<div class="line">        actions.Enable();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnDisable()</div>
<div class="line">    {</div>
<div class="line">        actions.Disable();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>but then we would have to look up all the actions manually in the action map. A simpler approach is to put all our actions in a separate asset and generate a C# wrapper class that automatically performs the lookup for us.</p>
<p>To create such an <code>.inputactions</code> asset, right-click in the Project Browser and click <code>Create &gt;&gt; Input Actions</code>. To edit the actions, double-click the <code>.inputactions</code> asset and a separate window will come up. The asset we use in this example is <a href="SimpleControls.inputactions">SimpleControls.inputactions</a>.</p>
<p>When you select the asset, note that <code>Generate C# Class</code> is ticked in the import settings. This triggers the generation of <a href="SimpleControls.cs">SimpleControls.cs</a> based on the <code>.inputactions</code> file.</p>
<p>Regarding the <code><a class="el" href="class_simple_controller___using_action_asset.html">SimpleController_UsingActionAsset</a></code> script, there are some notable differences.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_simple_controller___using_action_asset.html">SimpleController_UsingActionAsset</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// This replaces the InputAction instances we had before with</span></div>
<div class="line">    <span class="comment">// the generated C# class.</span></div>
<div class="line">    <span class="keyword">private</span> <a class="code hl_class" href="class_simple_controls.html">SimpleControls</a> m_Controls;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> Awake()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// To use the controls, we need to instantiate them.</span></div>
<div class="line">        <span class="comment">// This can be done arbitrary many times. E.g. there</span></div>
<div class="line">        <span class="comment">// can be multiple players each with its own SimpleControls</span></div>
<div class="line">        <span class="comment">// instance.</span></div>
<div class="line">        m_Controls = <span class="keyword">new</span> <a class="code hl_class" href="class_simple_controls.html">SimpleControls</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The generated C# class exposes all the action map</span></div>
<div class="line">        <span class="comment">// and actions in the asset by name. Here, we reference</span></div>
<div class="line">        <span class="comment">// the `fire` action in the `gameplay` action map, for</span></div>
<div class="line">        <span class="comment">// example.</span></div>
<div class="line">        m_Controls.gameplay.fire.performed +=</div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> Update()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Same here, we can just look the actions up by name.</span></div>
<div class="line">        var look = m_Controls.gameplay.look.ReadValue&lt;Vector2&gt;();</div>
<div class="line">        var move = m_Controls.gameplay.move.ReadValue&lt;Vector2&gt;();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//...</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_simple_controller___using_action_asset_html"><div class="ttname"><a href="class_simple_controller___using_action_asset.html">SimpleController_UsingActionAsset</a></div><div class="ttdef"><b>Definition</b> SimpleController_UsingActionAsset.cs:7</div></div>
<div class="ttc" id="aclass_simple_controls_html"><div class="ttname"><a href="class_simple_controls.html">SimpleControls</a></div><div class="ttdef"><b>Definition</b> SimpleControls.cs:19</div></div>
</div><!-- fragment --><p>Just for kicks, this sample also adds keyboard and mouse control to the game.</p>
<h1><a class="anchor" id="autotoc_md1617"></a>
SimpleDemo_UsingPlayerInput</h1>
<p><a href="./SimpleController_UsingPlayerInput.cs">Source</a></p>
<p>Finally, we reached the highest level of the input system. While scripting input like in the examples above can be quick and easy, it becomes hard to manage when there can be multiple devices and/or multiple players in the game. This is where <code>PlayerInput</code> comes in.</p>
<p><code>PlayerInput</code> automatically manages per-player device assignments and can also automatically handle control scheme switching in single player (e.g. when the player switches between a gamepad and mouse&amp;keyboard).</p>
<p>In our case, we're not getting too much out of it since we don't have control schemes or multiple players but still, let's have a look.</p>
<p>The first thing you'll probably notice is that now there are two script components on the <code><a class="el" href="class_player.html">Player</a></code> object, one being the usual <code>SimpleController</code> and the other being <code>PlayerInput</code>. The latter is what now refers to <a href="SimpleControls.inputactions">SimpleControls.inputactions</a>. It also has <code>gameplay</code> set as the <code>Default Action Map</code> so that the gameplay actions will get enabled right away when <code>PlayerInput</code> itself is enabled.</p>
<p>For getting callbacks, we have chosen <code>Invoke <a class="el" href="namespace_unity.html">Unity</a> Events</code> as the <code>Behavior</code>. If you expand the <code>Events</code> foldout in the inspector, you can see that <code>OnFire</code>, <code>OnMove</code>, and <code>OnLook</code> are added to the respective events. Each callback method here looks like the <code>started</code>, <code>performed</code>, and <code>canceled</code> callbacks we've already seen on <code>fireAction</code> before.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_simple_controller___using_player_input.html">SimpleController_UsingPlayerInput</a> : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> Vector2 m_Move;</div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnMove(InputAction.CallbackContext context)</div>
<div class="line">    {</div>
<div class="line">        m_Move = context.ReadValue&lt;Vector2&gt;();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//...</span></div>
<div class="line">}</div>
<div class="ttc" id="aclass_simple_controller___using_player_input_html"><div class="ttname"><a href="class_simple_controller___using_player_input.html">SimpleController_UsingPlayerInput</a></div><div class="ttdef"><b>Definition</b> SimpleController_UsingPlayerInput.cs:8</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
